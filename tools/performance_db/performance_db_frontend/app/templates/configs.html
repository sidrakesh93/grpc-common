{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      body { 
        padding-top: 70px;
      } 
    </style>
    <title>
      Configurations
    </title>
    <link rel="shortcut icon" type="image/png" href="../static/images/favicon.png">
      <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
          <div class="navbar-header">
            <button id="toggle_button" type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>

          <div class="collapse navbar-collapse" id="navbar-collapse">
            <ul class="nav navbar-nav navbar-left">
              <li id="leaderboard_item" class=""><a href="/dataTable">Performance Database</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Statistical Plots<span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li id="plotQPS" class=""><a href="/plotGeneral/QPS">QPS statistics</a></li>
                  <li id="plotPercentile50" class=""><a href="/plotGeneral/p50">50<sup>th</sup> %ile Latency statistics</a></li>
                  <li id="plotPercentile90" class=""><a href="/plotGeneral/p90">90<sup>th</sup> %ile Latency statistics</a></li>
                  <li id="plotPercentile95" class=""><a href="/plotGeneral/p95">95<sup>th</sup> %ile Latency statistics</a></li>
                  <li id="plotPercentile99" class=""><a href="/plotGeneral/p99">99<sup>th</sup> %ile Latency statistics</a></li>
                  <li id="plotPercentile99Point9" class=""><a href="/plotGeneral/p99point9">99.9<sup>th</sup> %ile Latency statistics</a></li>
                </ul>
              </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li id="contact_item" class=""><a id="about" onclick="$('#aboutModal').modal()" href="#">Contact</a></li>
            </ul>
          </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <!-- Modal -->
    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="aboutModalLabel">Contact Us</h4>
          </div>
          <div class="modal-body">
            <b>For any issues related to this leaderboard, please reach out at: grpc-io@googlegroups.com</b>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <h3 align="center">Client Configuration</h3>
      <hr>
      <div id="configs">
      <!-- {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %} -->
        <table id="client-configs-table"
              class="table table-striped">
          <thead>
            <tr>
              <th style="text-align:center; width:50%">Field</th>
              <th style="text-align:center; width:50%">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align:center">Client type</td>
              <td id="client_type" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Enable SSL</td>
              <td id="client_enable_ssl" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Outstanding RPCs per channel</td>
              <td id="outstanding_rpcs_per_channel" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Client channels</td>
              <td id="client_channels" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Payload size</td>
              <td id="payload_size" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Async Client Threads</td>
              <td id="async_client_threads" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">RPC Type</td>
              <td id="rpc_type" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Host</td>
              <td id="client_host" style="text-align:center"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <hr>
      <h3 align="center">Server Configuration</h3>
      <hr>
      <div id="configs">
      <!-- {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %} -->
        <table id="server-configs-table"
              class="table table-striped">
          <thead>
            <tr>
              <th style="text-align:center; width:50%">Field</th>
              <th style="text-align:center; width:50%">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align:center">Server type</td>
              <td id="server_type" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Threads</td>
              <td id="threads" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Enable SSL</td>
              <td id="server_enable_ssl" style="text-align:center"></td>
            </tr>
            <tr>
              <td style="text-align:center">Host</td>
              <td id="server_host" style="text-align:center"></td>
            </tr>
          </tbody>
        </table>
      </div>
      
    </div><!-- /.container -->

    <!-- JQuery core javascript  -->
    <script type="text/javascript" src="../static/jQuery/jquery-1.11.3.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script src="../static/js/bootstrap.min.js"></script>
    <script>
      var find = '\'';
      var re = new RegExp(find, 'g');
      var clientConfig = sessionStorage.clientConfig.replace(re, '"');
      var obj = jQuery.parseJSON(clientConfig);
      
      document.getElementById("client_type").innerHTML = obj.client_type;
      document.getElementById("client_enable_ssl").innerHTML = obj.enable_ssl;
      document.getElementById("outstanding_rpcs_per_channel").innerHTML = obj.outstanding_rpcs_per_channel;
      document.getElementById("client_channels").innerHTML = obj.client_channels;
      document.getElementById("payload_size").innerHTML = obj.payload_size;

      if(obj.client_type == 'Synchronous') {
        document.getElementById("client-configs-table").deleteRow(6);
      }
      else {
        document.getElementById("async_client_threads").innerHTML = obj.async_client_threads;
      }

      document.getElementById("rpc_type").innerHTML = obj.rpc_type;
      document.getElementById("client_host").innerHTML = obj.host;

      var serverConfig = sessionStorage.serverConfig.replace(re, '"');
      obj = jQuery.parseJSON(serverConfig);

      document.getElementById("server_type").innerHTML = obj.server_type;
      document.getElementById("threads").innerHTML = obj.threads;
      document.getElementById("server_enable_ssl").innerHTML = obj.enable_ssl;
      document.getElementById("server_host").innerHTML = obj.host;
    </script>
  </body>
</html>
  